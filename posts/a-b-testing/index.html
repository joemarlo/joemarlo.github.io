<!DOCTYPE html>
<html lang="en-us">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Common pitfalls of A/B testing</title>
<meta name="description" content="Personal portfolio of Joe Marlo">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<link rel="stylesheet" href="https://joemarlo.github.io/css/bootstrap.min.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
<link rel="stylesheet" href="https://joemarlo.github.io/css/font-awesome.min.css">
<link rel="stylesheet" href="https://joemarlo.github.io/css/owl.carousel.css">
<link rel="stylesheet" href="https://joemarlo.github.io/css/owl.theme.css">
<link rel="icon" href= "https://joemarlo.github.io/favicon.ico" /> 


  <link href="https://joemarlo.github.io/css/style.custom.css" rel="stylesheet" id="theme-stylesheet">

 

  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  


<link href="https://joemarlo.github.io/css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="https://joemarlo.github.io/img/favicon.png">


<link rel="apple-touch-icon" sizes="180x180" href="https://joemarlo.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://joemarlo.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://joemarlo.github.io/favicon-16x16.png">





</head>
<body>
  <div id="all">
      <div class="container-fluid">
          <div class="row row-offcanvas row-offcanvas-left">
              <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
  <div class="sidebar-content">
    <h1 class="sidebar-heading"><a href="https://joemarlo.github.io">Marlo</a></h1>
    
      <p class="sidebar-p">I'm an applied statistics grad student @ NYU. <br> Based in New York.</p>
    
    <ul class="sidebar-menu">
      
        <li><a href="https://joemarlo.github.io/posts/">Posts</a></li>
      
        <li><a href="https://joemarlo.github.io/projects/">Projects</a></li>
      
        <li><a href="https://joemarlo.github.io/about/">About</a></li>
      
    </ul>
    <p class="social">
  
  
  
  
  
  
  <a href="https://www.linkedin.com/in/jmarlo" data-animate-hover="pulse" class="external">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
  
  <a href="https://www.github.com/joemarlo" data-animate-hover="pulse" class="external">
    <i class="fa fa-github"></i>
  </a>
  
  
  
</p>


    <div class="copyright">
      <p class="credit">
        
          &copy;2021 Joe Marlo
        
        <br> Template by <a href="https://bootstrapious.com/free-templates" class="external">Bootstrapious.com</a>

&amp; ported to <a href="https://gohugo.io/">Hugo</a> by <a href="https://github.com/kishaningithub">Kishan B</a>

      </p>
    </div>
  </div>
</div>

              
<div class="col-xs-12 col-sm-8 col-md-9 content-column white-background">
  <div class="small-navbar visible-xs">
  <button type="button" data-toggle="offcanvas" class="btn btn-ghost pull-left"> <i class="fa fa-align-left"> </i>Menu</button>
  <h1 class="small-navbar-heading"><a href="https://joemarlo.github.io">Marlo</a></h1>
</div>

  <div class="row">
    <div class="col-lg-9">
      <div class="content-column-content">
         <h1>Common pitfalls of A/B testing</h1>
         <p><em>Why you could be doing it wrong</em></p>
<hr>
<p>A/B testing has become a buzz-word across the tech landscape. The method allows decision makers to see which version of a product performs better and enables leaders to make evidence-informed decisions. Companies, political campaigns, and market research firms often utilize these tests to improve website design, products, and marketing strategies.</p>
<p>You’re probably already doing A/B testing, but you could be doing it wrong. There are four common errors that undermine the results of your test and lead to poor decisions:</p>
<ul>
<li><a href="#optional-stopping"><strong>Optional stopping</strong></a>: running the same test until you see a positive result</li>
<li><a href="#the-multiple-comparison-problem"><strong>Multiple comparisons</strong></a>: if there is a negative result, trying a different outcome</li>
<li><a href="#insignificant-significant-results"><strong>Insignificant “significant” results</strong></a>: disregarding effect size</li>
<li><a href="#randomization-is-not-always-enough"><strong>Randomization is not always enough</strong></a>: ignoring interactions in your data</li>
</ul>
<br>
<h2 id="optional-stopping">Optional stopping</h2>
<p>One choice during the A/B process is deciding when data collection should stop and testing should begin. Making quick decisions is valuable, and it is tempting to frequently test the results as data comes in. For instance, you could stop data collection after every 100 users and conduct your analysis; if there is no significant finding, you resume data collection and repeat the process.</p>
<p>This is a problem. Following A/B test theory, there is a 5% chance that a positive result is a false positive. Increasing the number of stops increases this chance of a false positive.</p>
<p>To illustrate this problem, let’s conduct a series of simulations with a varying number of stops. The data were simulated such that there is no true difference between version A and version B, so any positive result is a false positive:</p>
<ul>
<li>Results show that stopping five times increases the false positive rate to about 15%, whereas stopping as many as 20 times increases the false positive rate to about 25%.</li>
<li>Frequent stopping can seem like a way to deliver quick results, but it drastically increases the risk of reaching a false conclusion.</li>
</ul>
<br>
<p align="center">
<img src="/img/posts/A-B-Testing/optional_stops.svg" width=90%>
</p>
<br>
<h2 id="the-multiple-comparison-problem">The multiple comparison problem</h2>
<p>A single A/B test cycle can be used to answer many questions. For example:</p>
<ul>
<li>Was there a difference in time spent between version A and version B?</li>
<li>How about a difference in the number of clicks or likes?</li>
</ul>
<br>
<p>Testing multiple outcomes allows you to get the most out of a single cycle, but careful considerations need to be taken to avoid drastically increasing the false positive rate. This risk increases with each additional outcome and without implementing the correct adjustment, the probability of coming to a false conclusion substantially rises.</p>
<blockquote>
<p>To calculate the increase in risk of a false positive result, there is a simple formula based on the number of hypotheses you are testing <em>h</em> at a significance level <em>alpha</em> (usually 0.05):</p>
<ul>
<li>Probability of at least one false positive = 1 - (1 - <em>alpha</em>)<sup><em>h</em></sup></li>
<li>Example: 5 tests = 1 - (1 - 0.05)<sup>5</sup> = 23% chance of a false positive</li>
</ul>
</blockquote>
<p>The risk of multiple comparisons can be controlled by introducing the <a href="https://www.stat.berkeley.edu/~mgoldman/Section0402.pdf">Bonferroni correction</a>, which accounts for the additional false positive risk introduced with each additional outcome.</p>
<p>To illustrate the implications of uncontrolled multiple comparison, let&rsquo;s conduct another series of simulations, but this time replace varying stops with varying numbers of comparisons. Like before, there is no difference between version A and version B, and any positive result is a false positive.</p>
<p>The plot below shows the increase in false positives as the number of comparisons increases:</p>
<ul>
<li>With as few as five comparisons, the risk of observing at least one false positive has increased from 5% to over 20%</li>
<li>However, when the appropriate correction is implemented, the false positive rate is held constant at 5%</li>
</ul>
<br>
<p align="center">
<img src="/img/posts/A-B-Testing/multiple_comparisons.svg" width=90%>
</p>
<br>
<h2 id="insignificant-significant-results">Insignificant “significant” results</h2>
<p>Let’s say you ran your A/B test and achieved statistically significant results. You may think your work is finished, but it’s important to consider the meaning of the effect size that you’re measuring, and its implications.</p>
<p>The below examples visualize different effect sizes that all have statistically significant results (p-values less than 0.05). You can clearly see that although all effect sizes are statistically significant, they each can have different meanings (a 10% change could have a much larger impact on your company than 1%).</p>
<p align="center">
<img src="/img/posts/A-B-Testing/effect_comp.svg" width=90%>
</p>
<br>
<p>Now, if the true difference between both versions was one second spent on the website, is this meaningful enough to your team? Will it translate into higher revenue that can justify rolling out this new version? Sometimes implementing a new version of a product can be costly, so it’s imperative to review whether or not it’s worth it. You should think not only of statistical significance, but the effect size.</p>
<br>
<h4 id="large-sample-small-effect">Large sample, small effect</h4>
<p>Incredibly small effects reach statistical significance as sample size grows. If you usually work with large sample sizes, a statistically significant result many not necessarily signal a meaningful change.</p>
<p align="center">
<img src="/img/posts/A-B-Testing/effect_size.svg" width=90%>
</p>
<br>
<h2 id="pulling-it-together">Pulling it together</h2>
<p>Juggling all these conditions can become overwhelming. As you might expect they compound on each other and quickly turn into a combinatorics nightmare. If you are performing multiple stops while also comparing more than one distribution it is likely that you may find a false positive. Additionally, the probability of finding a true effect doesn&rsquo;t scale linearly and behaves differently at different sample sizes and variances.</p>
<p>You can estimate the effects of all these conditions using <a style="font-size:1.1em;" href="https://jmarlo.shinyapps.io/A-B-tool/" target="_blank"><strong>this tool</strong></a>. The tool shows the <em>probability of finding at least one effect</em> given the conditions. Set the effect size to zero and find the false positive rate. Increase the effect size and variance but reduce the sample size and see how infrequently you may be capturing a real effect.</p>
<!-- this is the Shiny app
<div class="iframe-container">
  <iframe class="resp-iframe" src="https://jmarlo.shinyapps.io/A-B-tool/" allowfullscreen></iframe>
</div>
-->
<!-- this is the start of the d3 -->
<!-- Sliders in a grid -->
<!--
<div class="grid-container">

  <div class="slidecontainer">
    <input type="range" list="tickmarks_stops" min="1" max="20" value="1" step="1" class="slider" id="slider_stops">
    <div class="slidetext" <p>Number of stops: <span id="value_stops"></span></p></div>
  </div>

  <div class="slidecontainer">
    <input type="range" min="1" max="20" value="1" step="1" class="slider" id="slider_comparisons">
    <div class="slidetext" <p>Number of comparisons: <span id="value_comparisons"></span></p></div>
  </div>

  <div class="slidecontainer">
    <input type="range" min="0" max="0.10" value="0.02" step="0.01" class="slider" id="slider_effectsize">
    <div class="slidetext" <p>Effect size: <span id="value_effectsize"></span></p></div>
  </div>

  <div class="slidecontainer">
    <input type="range" min="1000" max="10000" value="1000" step="1000" class="slider" id="slider_samplesize">
    <div class="slidetext"<p>Sample size: <span id="value_samplesize"></span></p></div>
  </div>

</div>

<!-- Results -->
<!--
<p><h4>Probability of finding at least one effect: <span id="expected_probability"></span></h4></p>

<br>

<!-- d3 density plots -->
<!--
<div <div id="main_plot" style="position: static" align="center"></div>
<p align="right" style="font-size:60%;">
<i>
Assumptions:
<br>
- Standard deviation of distributions is X
<br>
- Results estimated by X simulations
</i>
</p>
<br>

-->
<br>
<h2 id="randomization-is-not-always-enough">Randomization is not always enough</h2>
<p>The power of randomization is that it allows you to make causal conclusions. However, randomization is not enough to uncover hidden patterns within your test.</p>
<p>For example, imagine you were a digital news organization interested in comparing the effects of how changing your website impacts how many minutes users spend reading site content. You know that some readers use their computers while others primarily use their phones to visit the site.</p>
<p>You conduct your A/B test and use randomization to ensure an equal number of computer and mobile users received version A and version B. If you stopped here and conducted your analysis, you would conclude that there is no difference between version A and version B of the site.</p>
<p>This simple A/B test does not account for the possibility that the effect of version A and version B may differ between computer and mobile users</p>
<p align="center">
<img src="/img/posts/A-B-Testing/no_interaction.svg" width=90%>
</p>
<p>When you examine the potential interaction between mediums (either computer or mobile), important differences emerge and a real difference becomes apparent. Among computer users, version B decreases time spent on the site, however, the same version increases time spent for users primarily interacting with the site by their phones. Without carefully exploring your data, underlying patterns can be lost.</p>
<p align="center">
<img src="/img/posts/A-B-Testing/interaction.svg" width=90%>
</p>
<br>
<h2 id="final-thoughts">Final thoughts</h2>
<p>A/B testing is a powerful tool that is frequently praised for its simplicity and ease of analysis. However, misguided conclusions can be made when optional stopping, multiple comparisons, effect size, and possible interactions are ignored.</p>
<p>When unaccounted for:</p>
<ul>
<li>Frequently checking your data mid experiment (optional stoppage) and conducting multiple comparisons without correction drastically increases the rate of false positives</li>
<li>Statistical significance and meaningful difference are not the same</li>
<li>Randomization alone is not enough to uncover hidden interactions within A/B tests</li>
</ul>
<p>Executing your experiment properly requires being mindful of these four common errors. If you are not, the results of your A/B test may be invalid and lead to poor decision-making.</p>
<br>
<hr>
<p><em>2020 May</em><br>
<em>Find the code here: <a href="https://github.com/joemarlo/A-B-Testing-with-d3">github.com/joemarlo/A-B-Testing-with-d3</a></em></p>
<!-- script for slider text -->
<script src="/d3/A-B-Testing/sliders.js"></script>
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://unpkg.com/d3-simple-slider"></script>
<!-- Load d3 plots -->
<script src="/d3/A-B-Testing/AB_testing.js"></script>
<!-- Load custom CSS -->
<link rel="stylesheet" type="text/css" href="/posts-css/A-B-Testing.css">
         
      </div>
    </div>
  </div>
</div>

          </div>
      </div>
  </div>
  <script src="https://joemarlo.github.io/js/jquery.min.js"></script>
<script src="https://joemarlo.github.io/js/bootstrap.min.js"></script>
<script src="https://joemarlo.github.io/js/jquery.cookie.js"> </script>
<script src="https://joemarlo.github.io/js/ekko-lightbox.js"></script>
<script src="https://joemarlo.github.io/js/jquery.scrollTo.min.js"></script>
<script src="https://joemarlo.github.io/js/masonry.pkgd.min.js"></script>
<script src="https://joemarlo.github.io/js/imagesloaded.pkgd.min.js"></script>
<script src="https://joemarlo.github.io/js/owl.carousel.min.js"></script>
<script src="https://joemarlo.github.io/js/front.js"></script>



</body>
</html>
